{"version":3,"file":"js/13.983c3bbf.js","mappings":"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","sources":["webpack://node_final/./src/stores/userStore.js","webpack://node_final/./src/views/SignUpView.vue","webpack://node_final/./src/views/SignUpView.vue?125d"],"sourcesContent":["import router from \"@/router\";\nimport { defineStore } from \"pinia\";\nimport {\n  apiUserSignIn,\n  apiUserSignUp,\n  apiGetProfile,\n  apiUpdateProfile,\n  apiUpdatePassword,\n  apiForgetPassword,\n  apiModifyPassword,\n} from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\nimport modalStore from \"./modalStore\";\nimport { setToken, clearToken } from \"@/scripts/methods\";\n\nconst status = statusStore();\nconst modal = modalStore();\n\nexport default defineStore(\"userStore\", {\n  state: () => {\n    return {\n      // 個人資料\n      profile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n      // 個人資料頁面 - 個人資料暫存表格\n      tempProfile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n      },\n      //個人牆頁面設置\n      personalInfo: {\n        name: \"\",\n        photo: \"\",\n        _id: \"\",\n      },\n    };\n  },\n  actions: {\n    // 登入\n    signIn(form, data) {\n      status.toggleLoading(true);\n      apiUserSignIn(data)\n        .then((res) => {\n          // 設定 token\n          const { token } = res.data.data;\n          setToken(token);\n\n          // 重置表單\n          form.resetForm();\n\n          status.toggleLoading(false);\n\n          // 轉至全體動態牆頁面\n          router.push({ name: \"DynamicWallView\" });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"登入失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 註冊\n    signUp(form, data) {\n      status.toggleLoading(true);\n      apiUserSignUp(data)\n        .then((res) => {\n          // 設定 token\n          const { token } = res.data.data;\n          setToken(token);\n\n          // 清空表格\n          form.resetForm();\n\n          status.pushMessage({\n            style: \"dark\",\n            content: \"註冊成功\",\n          });\n\n          status.toggleLoading(false);\n          router.push({ name: \"DynamicWallView\" });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"註冊失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 取得用戶資料\n    async getProfile() {\n      status.isLoading = true;\n      await apiGetProfile()\n        .then((res) => {\n          this.profile = res.data.data;\n          this.updateProfileData(this.profile);\n\n          status.isLoading = false;\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content:\n              err.response?.data?.message || \"取得個人資料失敗，請重新登入\",\n          });\n          status.isLoading = false;\n\n          // 若驗證個人資料失敗則強制登出\n          clearToken();\n          router.push(\"/signin\");\n        });\n    },\n    // 更新個人資料\n    async updateProfile(data) {\n      status.toggleLoading(true);\n      await apiUpdateProfile(data)\n        .then((res) => {\n          this.profile = res.data.data.user;\n\n          // 更新用戶 data 資料\n          this.updateProfileData(this.profile);\n\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"更新個人資料\",\n            content: \"已成功更新您的個人資料~\",\n          });\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"更新失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 更新密碼\n    async updatePassword(form, data) {\n      status.toggleLoading(true);\n      await apiUpdatePassword(data)\n        .then(() => {\n          // 重置表單\n          form.resetForm();\n\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"更新密碼成功\",\n            content: \"下次登入記得使用新密碼喔~\",\n          });\n\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"更新密碼失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 寄信重設 Email\n    async sendForgetEmail(data) {\n      status.toggleLoading(true);\n      await apiForgetPassword(data)\n        .then(() => {\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"信件已寄出，請收取郵件\",\n            content: \"請至信箱收取重設密碼信，若 1 天內沒收到信再請嘗試一次~\",\n          });\n\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          modal.toggleMsgModal({\n            title: \"驗證信箱失敗\",\n            content:\n              err.response?.data?.message || \"驗證信箱失敗，再請確認信箱\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 重設密碼 - 收取郵件\n    async modifyPassword(token, data) {\n      status.toggleLoading(true);\n      await apiModifyPassword(token, data)\n        .then(() => {\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"重設密碼成功\",\n            content: \"請使用新密碼登入喔~\",\n          });\n\n          router.push(\"/signin\");\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          modal.toggleMsgModal({\n            title: \"重設密碼失敗\",\n            content: err.response?.data?.message || \"重設密碼失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 更新個人資料頁面 - 個人資料暫存表格\n    updateProfileData(data) {\n      this.tempProfile = {\n        name: data.name,\n        photo: data.photo,\n        gender: data.gender,\n      };\n    },\n    // 取得 personalWall 用戶資料\n    togglePersonalInfo(data) {\n      this.personalInfo = data;\n    },\n  },\n});\n","<template>\r\n  <section class=\"d-flex justify-content-center align-items-center vh-100 mx-3\">\r\n    <div class=\"signin\">\r\n      <img src=\"../assets/images/signin.png\" class=\"d-none d-xl-block me-10\" />\r\n      <VForm\r\n        class=\"signinForm\"\r\n        v-slot=\"{ errors, meta }\"\r\n        @submit=\"submitSignup\"\r\n        ref=\"form\"\r\n      >\r\n        <img src=\"../assets/images/MetaWall.png\" class=\"mx-auto\" />\r\n        <h1 class=\"mb-9 text-center h3\">註冊</h1>\r\n        <div class=\"mb-4\">\r\n          <VField\r\n            type=\"name\"\r\n            id=\"name\"\r\n            name=\"暱稱\"\r\n            placeholder=\"請輸入暱稱\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['暱稱'] }\"\r\n            rules=\"required\"\r\n            v-model=\"user.name\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"暱稱\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <div class=\"mb-4\">\r\n          <VField\r\n            type=\"email\"\r\n            id=\"email\"\r\n            name=\"電子信箱\"\r\n            placeholder=\"請輸入電子信箱\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['電子信箱'] }\"\r\n            rules=\"email|required\"\r\n            v-model=\"user.email\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"電子信箱\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <div class=\"mb-8\">\r\n          <VField\r\n            type=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"請輸入密碼\"\r\n            name=\"密碼\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['密碼'] }\"\r\n            rules=\"required|password:8\"\r\n            v-model=\"user.password\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"密碼\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"effectBtn btn btn-primary w-100 mb-4\"\r\n          :disabled=\"!meta.valid\"\r\n        >\r\n          註冊\r\n        </button>\r\n        <router-link to=\"/signin\" class=\"link-dark text-center\">\r\n          登入\r\n        </router-link>\r\n      </VForm>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"pinia\";\r\nimport userStore from \"@/stores/userStore\";\r\n\r\nexport default {\r\n  name: \"SignUpView\",\r\n  data() {\r\n    return {\r\n      user: {\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 註冊\r\n    submitSignup() {\r\n      const form = this.$refs.form;\r\n      this.signUp(form, this.user);\r\n    },\r\n    ...mapActions(userStore, [\"signUp\"]),\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./SignUpView.vue?vue&type=template&id=052dfc81\"\nimport script from \"./SignUpView.vue?vue&type=script&lang=js\"\nexport * from \"./SignUpView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\小組\\\\期末小組\\\\node_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","modal","modalStore","defineStore","state","profile","name","photo","gender","_id","tempProfile","personalInfo","actions","signIn","form","data","toggleLoading","apiUserSignIn","then","res","token","setToken","resetForm","router","catch","err","pushMessage","style","content","response","message","signUp","apiUserSignUp","async","isLoading","apiGetProfile","this","updateProfileData","clearToken","apiUpdateProfile","user","toggleMsgModal","title","apiUpdatePassword","apiForgetPassword","apiModifyPassword","togglePersonalInfo","class","_createElementVNode","src","_imports_0","_imports_1","_createElementBlock","_hoisted_3","_createVNode","_component_VForm","onSubmit","$options","ref","errors","meta","_hoisted_4","_hoisted_5","_component_VField","type","id","placeholder","rules","$data","$event","required","_component_error_message","email","password","disabled","valid","_hoisted_9","_component_router_link","to","methods","submitSignup","$refs","mapActions","userStore","__exports__","render"],"sourceRoot":""}