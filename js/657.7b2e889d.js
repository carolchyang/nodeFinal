"use strict";(self["webpackChunknode_final"]=self["webpackChunknode_final"]||[]).push([[657],{6462:function(e,t,a){var o=a(3766),s=a(3248),n=a(6294);const l=(0,n.Z)();t["Z"]=(0,o.Q_)("followStore",{state:()=>({follows:[],followArray:[]}),actions:{async getFollows(e){let t=e||{};t={pageCount:100,page:e?.page||1,reverse:0==e?.reverse?0:1},await(0,s.fe)(t).then((e=>{this.follows=e.data.data.data,this.getFollowArray()})).catch((e=>{l.pushMessage({style:"danger",content:e.response?.data?.message||"取得追蹤名單失敗"})}))},async createFollow(e){await(0,s.lC)({targetUserId:e}).then((()=>{l.pushMessage({style:"dark",content:"已追蹤"})})).catch((e=>{l.pushMessage({style:"danger",content:e.response?.data?.message||"新增追蹤失敗"})}))},async delFollow(e){await(0,s.Ac)(e).then((()=>{l.pushMessage({style:"dark",content:"取消追蹤成功"})})).catch((e=>{l.pushMessage({style:"danger",content:e.response?.data?.message||"取消追蹤失敗"})}))},getFollowArray(){const e=[];this.follows.forEach((t=>{e.push({followId:t._id,targetUserId:t.targetUserId._id})})),this.followArray=e}}})},4331:function(e,t,a){var o=a(1120),s=a(3766),n=a(3248),l=a(6294),r=a(2323),i=a(7965);const d=(0,l.Z)(),g=(0,r.Z)();t["Z"]=(0,s.Q_)("userStore",{state:()=>({profile:{name:"",photo:"",gender:"",_id:""},tempProfile:{name:"",photo:"",gender:""},personalInfo:{name:"",photo:"",_id:""}}),actions:{signIn(e,t){d.toggleLoading(!0),(0,n.TV)(t).then((t=>{const{token:a}=t.data.data;(0,i.o4)(a),e.resetForm(),d.toggleLoading(!1),o.Z.push({name:"DynamicWallView"})})).catch((e=>{d.pushMessage({style:"danger",content:e.response?.data?.message||"登入失敗"}),d.toggleLoading(!1)}))},signUp(e,t){d.toggleLoading(!0),(0,n.pY)(t).then((t=>{const{token:a}=t.data.data;(0,i.o4)(a),e.resetForm(),d.pushMessage({style:"dark",content:"註冊成功"}),d.toggleLoading(!1),o.Z.push({name:"DynamicWallView"})})).catch((e=>{d.pushMessage({style:"danger",content:e.response?.data?.message||"註冊失敗"}),d.toggleLoading(!1)}))},async getProfile(){d.isLoading=!0,await(0,n.TY)().then((e=>{this.profile=e.data.data,this.updateProfileData(this.profile),d.isLoading=!1})).catch((e=>{d.pushMessage({style:"danger",content:e.response?.data?.message||"取得個人資料失敗，請重新登入"}),d.isLoading=!1,(0,i.qz)(),o.Z.push("/signin")}))},async updateProfile(e){d.toggleLoading(!0),await(0,n.MH)(e).then((e=>{this.profile=e.data.data.user,this.updateProfileData(this.profile),g.toggleMsgModal({title:"更新個人資料",content:"已成功更新您的個人資料~"}),d.toggleLoading(!1)})).catch((e=>{d.pushMessage({style:"danger",content:e.response?.data?.message||"更新失敗"}),d.toggleLoading(!1)}))},async updatePassword(e,t){d.toggleLoading(!0),await(0,n.HS)(t).then((()=>{e.resetForm(),g.toggleMsgModal({title:"更新密碼成功",content:"下次登入記得使用新密碼喔~"}),d.toggleLoading(!1)})).catch((e=>{d.pushMessage({style:"danger",content:e.response?.data?.message||"更新密碼失敗"}),d.toggleLoading(!1)}))},async sendForgetEmail(e){d.toggleLoading(!0),await(0,n.ZP)(e).then((()=>{g.toggleMsgModal({title:"信件已寄出，請收取郵件",content:"請至信箱收取重設密碼信，若 1 天內沒收到信再請嘗試一次~"}),d.toggleLoading(!1)})).catch((e=>{g.toggleMsgModal({title:"驗證信箱失敗",content:e.response?.data?.message||"驗證信箱失敗，再請確認信箱"}),d.toggleLoading(!1)}))},async modifyPassword(e,t){d.toggleLoading(!0),await(0,n.$F)(e,t).then((()=>{g.toggleMsgModal({title:"重設密碼成功",content:"請使用新密碼登入喔~"}),o.Z.push("/signin"),d.toggleLoading(!1)})).catch((e=>{g.toggleMsgModal({title:"重設密碼失敗",content:e.response?.data?.message||"重設密碼失敗"}),d.toggleLoading(!1)}))},updateProfileData(e){this.tempProfile={name:e.name,photo:e.photo,gender:e.gender}},togglePersonalInfo(e){this.personalInfo=e}}})},7729:function(e,t,a){a.d(t,{Z:function(){return c}});var o=a(3396);const s={class:"bg-white border border-2 rounded shadow-sm"},n=(0,o.uE)('<div class="p-4 border-bottom border-2 border-dark"><ul class="d-flex"><li class="circle me-2"></li><li class="circle circle-1 me-2"></li><li class="circle circle-2"></li></ul></div>',1),l={class:"py-8 text-center text-light"};function r(e,t,a,r,i,d){return(0,o.wg)(),(0,o.iD)("div",s,[n,(0,o._)("div",l,[(0,o.WI)(e.$slots,"default")])])}var i={name:"EmptyCardComponent"},d=a(89);const g=(0,d.Z)(i,[["render",r]]);var c=g},3657:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var o=a(3396),s=a(7139),n=a(9242),l=a(2893);const r=(0,o._)("h1",{class:"header"},"追蹤名單",-1),i={class:"mb-6"},d={class:"d-flex flex-column flex-md-row align-items-center"},g=["src"],c={key:1,src:l,class:"thumbnail thumbnail-xl d-none d-md-block border-0 me-4"},h={class:"me-md-auto mb-3 mb-md-0"},p={class:"fw-bold"},m={class:"d-none d-md-block text-light fs-6"},w={class:"me-3"},f=["onClick"],u={key:0,class:"spinner-border",style:{width:"1.2rem",height:"1.2rem"},role:"status"},y=(0,o._)("span",{class:"visually-hidden"},"Loading...",-1),L=[y],Z={key:1,class:"bi bi-trash3 text-primary fs-4 lh-sm"},b=(0,o._)("span",{class:"d-block"},"取消",-1),k=["onClick"],v=(0,o._)("i",{class:"bi bi-arrow-right-circle fs-4 lh-sm"},null,-1),x=(0,o._)("span",{class:"d-block"},"查看",-1),A=[v,x],M=(0,o.Uk)("目前還未追蹤任何人");function C(e,t,a,l,y,v){const x=(0,o.up)("EmptyCardComponent");return(0,o.wg)(),(0,o.iD)(o.HY,null,[r,(0,o._)("ul",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.follows,((t,a)=>((0,o.wg)(),(0,o.iD)("li",{class:(0,s.C_)(["card customList",{disabled:e.partLoading.id==t._id}]),key:a},[(0,o._)("div",d,[t.targetUserId?.photo?((0,o.wg)(),(0,o.iD)("img",{key:0,src:t.targetUserId?.photo,class:"thumbnail thumbnail-xl d-none d-md-block border-0 me-4"},null,8,g)):((0,o.wg)(),(0,o.iD)("img",c)),(0,o._)("div",h,[(0,o._)("div",p,(0,s.zw)(t.targetUserId?.name),1),(0,o._)("p",m,[(0,o._)("span",w," 追蹤時間："+(0,s.zw)(e.$getTime(t.createAt)),1),(0,o._)("span",null," 已追蹤 "+(0,s.zw)(e.$getDiffTime(t.createAt))+"！ ",1)])]),(0,o._)("a",{href:"#",class:"d-none d-md-block link-dark me-3 me-sm-9 text-center fw-bold text-decoration-none",onClick:(0,n.iM)((e=>v.delFollowItem(t._id)),["prevent"])},[e.partLoading.id==t._id?((0,o.wg)(),(0,o.iD)("div",u,L)):((0,o.wg)(),(0,o.iD)("i",Z)),b],8,f),(0,o._)("a",{href:"#",class:"link-dark me-md-9 text-center fw-bold text-decoration-none",onClick:(0,n.iM)((e=>v.toPersonalWall({_id:t.targetUserId?._id,name:t.targetUserId?.name,photo:t.targetUserId?.photo})),["prevent"])},A,8,k)])],2)))),128))]),e.follows.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(x,{key:0},{default:(0,o.w5)((()=>[M])),_:1}))],64)}var P=a(7729),q=a(3766),F=a(6294),I=a(6462),K=a(4331),W={name:"FollowView",methods:{async delFollowItem(e){this.togglePartLoading(e,"follow"),await this.delFollow(e),await this.getFollows(),this.togglePartLoading("","")},toPersonalWall(e){const{_id:t}=e;this.togglePersonalInfo(e),this.$router.push({path:`/personalwall/${t}`})},...(0,q.nv)(I.Z,["getFollows","delFollow"]),...(0,q.nv)(K.Z,["togglePersonalInfo"]),...(0,q.nv)(F.Z,["toggleLoading","togglePartLoading"])},computed:{...(0,q.rn)(F.Z,["partLoading"]),...(0,q.rn)(I.Z,["follows"]),...(0,q.rn)(K.Z,["profile"])},components:{EmptyCardComponent:P.Z},async created(){this.toggleLoading(!0),await this.getFollows({userId:this.profile._id}),this.toggleLoading(!1)}},U=a(89);const V=(0,U.Z)(W,[["render",C]]);var D=V},2893:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABrCAMAAABHYYw+AAABKVBMVEXd7fpcZnDGxsjf7fve7/tcZXLGxcrEx8fFxcddZnHGxslaZW/HyMnc7vrIyMre6fZcZXDd7/nExsqfoqjIxcjHxsZkbnjd7v3g7/zh7/rU2eVcZm7R4OvGxszFx8mnt8FbZHG+vsKqrLDf7/meqrbX4+p8iJTf7fh7iZTc6/fb6fXU2uPU3eXa5vC9vsJeZ3Ha5fKirrmUm6NjbXfY5O3X4e3C0N6tvMewusaFjZZud39oc37d7PrS2eDG0t7Gxcl1e4VdY29aZWzHyMywvsm2u764ub2Vm6B0fYVhanbg7f3V2t+7xdDCwcWmtL6ytLqBho1faXPi7/zb5/LK1+PIxsy/wsKqqa6PmKCHjZdveINocXrCytK5xs+sq7CXoK2ipqyIi5Z+ipM8r/IdAAAEIUlEQVRo3u3aaVPaUBSA4XtPbm5WkKREoBhqSSkFRVCxC+5rtYvV7vv2/39ED0kKQdNPPcxYm2eGneGdAyEkGVgmk8lkMpnMVVISrCwSnjwpsWkRGw9uTZhT2LSI9rqaZD0rTyVWRtgyeMLel4oiECOiKBsbiqK0H6CHt1ZVnjD/7eHQawWRtCJz57xQUBFPMHiB4zt5StgKKkEwdzLspLJOg6DSpGkFQfvg4LRr8EuqCC/eHxy8xhYJMadiKGqlU+8wKnPzydT0W/y6tZRS6VKrauzxCXeaNK3Lc60PBsZ0WkJMtozuC7DPOS8Y5K3AcS638idTabW3tp5ZfET9tL5+5O1/XP90Pq7zla2tNYLV1H3LKvCx3UPT9nWwa7Vjg49Z88sULV7lI0Zh/hA8CeD57jHn3cS8JC3V4COrsydLvoYt19TPZmfHLYOmxUMq4t0Xz9/Cb8+fv/2oVkexZUbQMsZzdY+KJozld/iopZK0rD0rttc9cmGitTtvxXaXFYf9rb5vukhDNfAgSXM9rRZzFwlaHd98AzK2vQ0pigDe/ib7e519WwMJEdOEFBI8L79A0FJarZ4Psbxt2xCz7XweQmZts9XKEWwDPxFOS4IWwRHRaMa4pelPFUcQtHKKmNFHs0AStiLFBSYEo2qlM8ctNLVW9Ln9wy3U7L3q2+Zo6YtBTN981Wk1GRFRdtrYiumhxDdtUQkEo1IqsbatAzJ1SIruWywp+Awyky0zucxjK+cwSq28DS6AjZn4PG65mrnIaLVwufPSWhqQtzY6nYYbrQ/zWNDzIRvgaaczw4gJpY0t09R1QDpeg/C0qOCqkNEqsRndl74vTakBKnqaNFG0WUgea6yt9fsNKEat4uZaA82UGTmlhD9QQgjH97CFZANvo6nM5eQYapog4xYbyjHC2IXjCY4J0Vxaw2FjOcqWEyvVILamjJDNVQ4qqBx7aWtFE9VqjaASe1kJHJpWUOnfG7v748OHR6Gfd8ceNBkJIa7lcYBr28LPay/aA0vNDHeZqnccqlbv8eOVxyvveZozfGRl5Zmgas24UgN52+ApbsiilP5NRtbaHraW1NSWNlxfLeRot0WX0ucCJBdY1rpiLe32n1roZtbKWlkra/0/LVi6pq3bq7MXrKLvU2ntW5wXLuBWXSdsCeG0dPAA8tyoGlWeUKha1XcSQMJTR2kS7INt9HqN8PCxvXN8fGLxBGOwsxO25Gav3yKYq+f6LoT7kq6Ug4m5dg+xE84F4C8SzNWRbzwoakWcrSgHPMk6Ksqw5boAFEdvtnzP9KSHk22DOyjwhOqhpm/72BpO/ZmRaONc0vN3LYurPEG1LOsrzuVBfZlRqYevZw0Xh4m58FSHoTojbKF6gV/8/4HKq2cwxAjV63XGU0WPkUtvha5c6xe/H4JCWEurNwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=657.7b2e889d.js.map