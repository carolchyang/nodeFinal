{"version":3,"file":"js/547.002eb8b0.js","mappings":"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","sources":["webpack://node_final/./src/stores/followStore.js","webpack://node_final/./src/components/PaginationComponent.vue","webpack://node_final/./src/components/PaginationComponent.vue?4f9e","webpack://node_final/./src/views/front/PersonalWallView.vue","webpack://node_final/./src/views/front/PersonalWallView.vue?c6c5"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { apiGetFollow, apiCreateFollow, apiDelFollow } from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\n\nconst status = statusStore();\n\nexport default defineStore(\"followStore\", {\n  state: () => {\n    return {\n      follows: [],\n      followArray: [],\n    };\n  },\n  actions: {\n    // 取得追蹤名單\n    async getFollows(data) {\n      // 使用 tempData 處理傳入的參數，避免傳進空值造成錯誤\n      let tempData = data || {};\n      tempData = {\n        // 每頁筆數(預設值 10)\n        pageCount: 100,\n        // 第幾頁\n        page: data?.page || 1,\n        // 排序順序 1 新到舊 0 舊到新\n        reverse: data?.reverse == 0 ? 0 : 1,\n      };\n\n      await apiGetFollow(tempData)\n        .then((res) => {\n          this.follows = res.data.data.data;\n          this.getFollowArray();\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"取得追蹤名單失敗\",\n          });\n        });\n    },\n    // 新增追蹤\n    // 此 ID 為 被追蹤者 ID\n    async createFollow(id) {\n      await apiCreateFollow({ targetUserId: id })\n        .then(() => {\n          status.pushMessage({\n            style: \"dark\",\n            content: \"已追蹤\",\n          });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"新增追蹤失敗\",\n          });\n        });\n    },\n    // 取消追蹤\n    // 此 ID 為 追蹤 ID\n    async delFollow(id) {\n      await apiDelFollow(id)\n        .then(() => {\n          status.pushMessage({\n            style: \"dark\",\n            content: \"取消追蹤成功\",\n          });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"取消追蹤失敗\",\n          });\n        });\n    },\n    // 取得追蹤 ID、被追蹤者 ID\n    getFollowArray() {\n      const array = [];\n      this.follows.forEach((item) => {\n        array.push({\n          // 此追蹤 ID\n          followId: item._id,\n          // 被追蹤者 ID\n          targetUserId: item.targetUserId._id,\n        });\n      });\n      this.followArray = array;\n    },\n  },\n});\n","<template>\n  <nav aria-label=\"Page navigation\">\n    <ul class=\"pagination justify-content-center\">\n      <li\n        class=\"page-item\"\n        :class=\"{ disabled: !(pagination.current_pages > 1) }\"\n      >\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Previous\"\n          @click.prevent=\"changePage(pagination.current_pages - 1)\"\n        >\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li\n        class=\"page-item\"\n        v-for=\"n in pagination.total_pages\"\n        :key=\"n\"\n        :class=\"{ active: pagination.current_pages == n }\"\n      >\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(n)\">{{ n }}</a>\n      </li>\n      <li\n        class=\"page-item\"\n        :class=\"{\n          disabled: !(pagination.current_pages < pagination.total_pages),\n        }\"\n      >\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Next\"\n          @click.prevent=\"changePage(pagination.current_pages + 1)\"\n        >\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nexport default {\n  name: \"PaginationComponent\",\n  props: [\"pagination\"],\n  emits: [\"get-all\"],\n  methods: {\n    // 換頁功能\n    changePage(page = 1) {\n      this.$emit(\"get-all\", page, \"loading\");\n    },\n  },\n};\n</script>\n","import { render } from \"./PaginationComponent.vue?vue&type=template&id=4196d4aa\"\nimport script from \"./PaginationComponent.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\小組\\\\期末小組\\\\node_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"header header-rounded d-flex mb-5\">\r\n    <img\r\n      :src=\"personalInfo.photo\"\r\n      class=\"headerThumbnail\"\r\n      v-if=\"personalInfo.photo\"\r\n    />\r\n    <img\r\n      src=\"../../assets/images/user_default.png\"\r\n      class=\"headerThumbnail\"\r\n      v-else\r\n    />\r\n    <div class=\"headerContent\">\r\n      <h2 class=\"text-start h5 fw-bold me-auto\">\r\n        <span>{{ personalInfo.name }}</span>\r\n        <span class=\"d-block d-sm-block\">的貼文牆</span>\r\n      </h2>\r\n      <div v-if=\"personalInfo._id !== profile._id\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-warning py-2 px-6 px-sm-8 border-dark fw-bold shadow\"\r\n          @click.prevent=\"toggleFollow(personalInfo._id, 'create')\"\r\n          v-if=\"!isFollow\"\r\n        >\r\n          <span\r\n            class=\"spinner-border spinner-border-sm\"\r\n            role=\"status\"\r\n            aria-hidden=\"true\"\r\n            v-if=\"\r\n              partLoading.type == 'follow' && partLoading.id == personalInfo._id\r\n            \"\r\n          ></span>\r\n          追蹤\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-secondary py-2 px-4 px-sm-8 border-dark fw-bold shadow\"\r\n          @click.prevent=\"toggleFollow(personalInfo._id, 'del')\"\r\n          v-else\r\n        >\r\n          <span\r\n            class=\"spinner-border spinner-border-sm\"\r\n            role=\"status\"\r\n            aria-hidden=\"true\"\r\n            v-if=\"\r\n              partLoading.type == 'follow' && partLoading.id == personalInfo._id\r\n            \"\r\n          ></span>\r\n          取消追蹤\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row g-3 mb-4\">\r\n    <div class=\"col-12 col-md-4\">\r\n      <select\r\n        class=\"form-select form-select-sm\"\r\n        v-model=\"reverse\"\r\n        @change=\"getAll(1, 'loading')\"\r\n      >\r\n        <option value=\"1\">由新到舊</option>\r\n        <option value=\"0\">由舊到新</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"col-12 col-md-8\">\r\n      <div class=\"input-group input-group-sm\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder=\"搜尋貼文\"\r\n          aria-label=\"search\"\r\n          aria-describedby=\"search\"\r\n          v-model.trim=\"keyword\"\r\n        />\r\n        <button\r\n          class=\"effectBtn btn btn-primary py-0 px-3\"\r\n          type=\"button\"\r\n          id=\"search\"\r\n          @click.prevent=\"getAll(1, 'loading')\"\r\n        >\r\n          <i class=\"bi bi-search h3\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ArticleComponent\r\n    :data=\"posts\"\r\n    :profile=\"profile\"\r\n    @toggle-like=\"toggleLike\"\r\n    @update-comments=\"updateComments\"\r\n    v-if=\"posts.length\"\r\n  ></ArticleComponent>\r\n\r\n  <EmptyCardComponent v-else>\r\n    <template #default>目前尚無動態，趕快叫他新增貼文吧！</template>\r\n  </EmptyCardComponent>\r\n\r\n  <PaginationComponent\r\n    :pagination=\"pagination\"\r\n    @get-all=\"getAll\"\r\n    v-if=\"posts.length\"\r\n  ></PaginationComponent>\r\n\r\n  <DelModalComponent @del-data=\"delData\">\r\n    <template #default>\r\n      確定要刪除此則\r\n      <b class=\"text-danger\">{{ modal.title }}</b>\r\n      ？（刪除後無法回復）\r\n    </template>\r\n  </DelModalComponent>\r\n</template>\r\n\r\n<script>\r\nimport ArticleComponent from \"@/components/ArticleComponent.vue\";\r\nimport EmptyCardComponent from \"@/components/EmptyCardComponent.vue\";\r\nimport PaginationComponent from \"@/components/PaginationComponent\";\r\nimport DelModalComponent from \"@/components/DelModalComponent.vue\";\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport modalStore from \"@/stores/modalStore\";\r\nimport userStore from \"@/stores/userStore\";\r\nimport postStore from \"@/stores/postStore\";\r\nimport likeStore from \"@/stores/likeStore\";\r\nimport commentStore from \"@/stores/commentStore\";\r\nimport followStore from \"@/stores/followStore\";\r\nimport { socket } from \"@/scripts/api\";\r\n\r\nexport default {\r\n  name: \"DynamicWallView\",\r\n  data() {\r\n    return {\r\n      personalId: \"\",\r\n      keyword: \"\",\r\n      reverse: 1,\r\n    };\r\n  },\r\n  watch: {\r\n    postIds() {\r\n      socket.emit(\"register\", this.postIds);\r\n    },\r\n  },\r\n  methods: {\r\n    // 取得貼文資料\r\n    async getAll(page = 1, isLoading) {\r\n      if (isLoading) {\r\n        this.toggleLoading(true);\r\n      }\r\n      const data = {};\r\n      data.page = page;\r\n      data.reverse = this.reverse;\r\n      data.userId = this.personalId;\r\n      data.content = this.keyword;\r\n\r\n      await this.getPosts(data);\r\n      this.toggleLoading(false);\r\n    },\r\n    // 刪除回覆/貼文\r\n    async delData() {\r\n      this.togglePartLoading(this.modal.id, this.modal.type);\r\n      let modalType = \"delComment\";\r\n      let page = this.pagination?.current_pages;\r\n      if (this.modal.type == \"delpost\") {\r\n        modalType = \"delPost\";\r\n        page = 1;\r\n      }\r\n      await this[modalType](this.modal.id);\r\n      await this.getAll(page);\r\n      this.togglePartLoading(\"\", \"\");\r\n    },\r\n    // 切換按讚狀態\r\n    async toggleLike({ id, type }) {\r\n      this.togglePartLoading(id, \"like\");\r\n      let toggleType = \"clickLike\";\r\n      if (type == \"cancel\") {\r\n        toggleType = \"delLike\";\r\n      }\r\n      await this[toggleType](id);\r\n      await this.getAll(this.pagination?.current_pages);\r\n      this.togglePartLoading(\"\", \"\");\r\n    },\r\n    // 切換追蹤狀態\r\n    async toggleFollow(_id, type) {\r\n      this.togglePartLoading(_id, \"follow\");\r\n      let toggleType = \"\";\r\n      let id = \"\";\r\n      // 若為取消追蹤則取得 followId\r\n      if (type == \"del\") {\r\n        toggleType = \"delFollow\";\r\n        this.followArray.forEach((item) => {\r\n          if (item.targetUserId == _id) {\r\n            id = item.followId;\r\n          }\r\n        });\r\n        // 追蹤\r\n      } else {\r\n        toggleType = \"createFollow\";\r\n        id = _id;\r\n      }\r\n      await this[toggleType](id);\r\n      await this.getFollows();\r\n      this.togglePartLoading(\"\", \"\");\r\n    },\r\n    // 建立回覆\r\n    async updateComments(data) {\r\n      this.togglePartLoading(data.postId, \"comment\");\r\n      await this.createComment(data);\r\n      await this.getAll(this.pagination?.current_pages);\r\n      this.togglePartLoading(\"\", \"\");\r\n    },\r\n    ...mapActions(statusStore, [\"toggleLoading\", \"togglePartLoading\"]),\r\n    ...mapActions(postStore, [\"getPosts\", \"delPost\"]),\r\n    ...mapActions(likeStore, [\"clickLike\", \"delLike\"]),\r\n    ...mapActions(commentStore, [\"createComment\", \"delComment\"]),\r\n    ...mapActions(followStore, [\"getFollows\", \"createFollow\", \"delFollow\"]),\r\n  },\r\n  computed: {\r\n    // 判斷是否追蹤\r\n    isFollow() {\r\n      let val = false;\r\n      this.followArray.forEach((item) => {\r\n        if (item.targetUserId == this.personalInfo?._id) {\r\n          val = true;\r\n        }\r\n      });\r\n      return val;\r\n    },\r\n    postIds() {\r\n      return this.posts.map((post) => post.id);\r\n    },\r\n    ...mapState(modalStore, [\"modal\"]),\r\n    ...mapState(statusStore, [\"partLoading\"]),\r\n    ...mapState(userStore, [\"profile\", \"personalInfo\"]),\r\n    ...mapState(postStore, [\"posts\", \"pagination\"]),\r\n    ...mapState(followStore, [\"follows\", \"followArray\"]),\r\n  },\r\n  components: {\r\n    ArticleComponent,\r\n    EmptyCardComponent,\r\n    PaginationComponent,\r\n    DelModalComponent,\r\n  },\r\n  async created() {\r\n    // 判定是否有此用戶資料，若無則跳轉至首頁\r\n    if (!this.personalInfo._id) {\r\n      return this.$router.push(\"/\");\r\n    }\r\n    // 取得 personalWall 用戶資料\r\n    this.toggleLoading(true);\r\n    this.personalId = this.$route.params.id;\r\n    await this.getAll();\r\n    await this.getFollows();\r\n    this.toggleLoading(false);\r\n\r\n    socket.connect();\r\n\r\n    socket.on(\"addComment\", (comment) => {\r\n      const post = this.posts.find((post) => post._id === comment.postId);\r\n      post.comments.unshift(comment);\r\n    });\r\n\r\n    socket.on(\"removeComment\", ({ postId, commentId }) => {\r\n      if (!this.postIds.includes(postId)) return;\r\n\r\n      const post = this.posts.find((post) => post._id === postId);\r\n      const idx = post.comments.findIndex(\r\n        (comment) => comment._id === commentId\r\n      );\r\n      if (idx > -1) post.comments.splice(idx, 1);\r\n    });\r\n\r\n    socket.on(\"updateLikeCount\", ({ isLike, userId, postId }) => {\r\n      if (!this.postIds.includes(postId)) return;\r\n\r\n      const idx = this.posts.findIndex((post) => post._id === postId);\r\n      const likeCount = this.posts[idx].likeCount;\r\n\r\n      if (isLike) {\r\n        likeCount.push(userId);\r\n      } else {\r\n        likeCount.splice(idx, 1);\r\n      }\r\n    });\r\n  },\r\n  unmounted() {\r\n    socket.disconnect();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./PersonalWallView.vue?vue&type=template&id=f0ff4692\"\nimport script from \"./PersonalWallView.vue?vue&type=script&lang=js\"\nexport * from \"./PersonalWallView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\小組\\\\期末小組\\\\node_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","follows","followArray","actions","async","data","tempData","pageCount","page","reverse","apiGetFollow","then","res","this","getFollowArray","catch","err","pushMessage","style","content","response","message","id","apiCreateFollow","targetUserId","apiDelFollow","array","forEach","item","push","followId","_id","class","_createElementVNode","_hoisted_3","_hoisted_6","_createElementBlock","disabled","$props","current_pages","href","onClick","$options","_Fragment","_renderList","total_pages","n","active","key","_hoisted_5","name","props","emits","methods","changePage","$emit","__exports__","render","src","_imports_0","role","value","_hoisted_14","_hoisted_15","_hoisted_19","_ctx","photo","_toDisplayString","_hoisted_7","type","$data","$event","onChange","placeholder","length","_createBlock","_component_ArticleComponent","profile","onToggleLike","onUpdateComments","_component_EmptyCardComponent","default","_component_PaginationComponent","pagination","onGetAll","_createVNode","_component_DelModalComponent","onDelData","title","personalId","keyword","watch","postIds","socket","isLoading","toggleLoading","userId","getPosts","togglePartLoading","modal","modalType","getAll","toggleType","getFollows","postId","createComment","mapActions","postStore","likeStore","commentStore","followStore","computed","isFollow","val","personalInfo","posts","map","post","mapState","modalStore","userStore","components","ArticleComponent","EmptyCardComponent","PaginationComponent","DelModalComponent","$router","$route","params","comment","find","comments","unshift","commentId","includes","idx","findIndex","splice","isLike","likeCount","unmounted"],"sourceRoot":""}