{"version":3,"file":"js/169.f0c97869.js","mappings":"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","sources":["webpack://node_final/./src/stores/userStore.js","webpack://node_final/./src/components/MsgModalComponent.vue","webpack://node_final/./src/components/MsgModalComponent.vue?431b","webpack://node_final/./src/views/ForgetView.vue","webpack://node_final/./src/views/ForgetView.vue?d5ea"],"sourcesContent":["import router from \"@/router\";\nimport { defineStore } from \"pinia\";\nimport {\n  apiUserSignIn,\n  apiUserSignUp,\n  apiGetProfile,\n  apiUpdateProfile,\n  apiUpdatePassword,\n  apiForgetPassword,\n  apiModifyPassword,\n} from \"@/scripts/api\";\nimport statusStore from \"./statusStore\";\nimport modalStore from \"./modalStore\";\nimport { setToken, clearToken } from \"@/scripts/methods\";\n\nconst status = statusStore();\nconst modal = modalStore();\n\nexport default defineStore(\"userStore\", {\n  state: () => {\n    return {\n      // 個人資料\n      profile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n        _id: \"\",\n      },\n      // 個人資料頁面 - 個人資料暫存表格\n      tempProfile: {\n        name: \"\",\n        photo: \"\",\n        gender: \"\",\n      },\n      //個人牆頁面設置\n      personalInfo: {\n        name: \"\",\n        photo: \"\",\n        _id: \"\",\n      },\n    };\n  },\n  actions: {\n    // 登入\n    signIn(form, data) {\n      status.toggleLoading(true);\n      apiUserSignIn(data)\n        .then((res) => {\n          // 設定 token\n          const { token } = res.data.data;\n          setToken(token);\n\n          // 重置表單\n          form.resetForm();\n\n          status.toggleLoading(false);\n\n          // 轉至全體動態牆頁面\n          router.push({ name: \"DynamicWallView\" });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"登入失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 註冊\n    signUp(form, data) {\n      status.toggleLoading(true);\n      apiUserSignUp(data)\n        .then((res) => {\n          // 設定 token\n          const { token } = res.data.data;\n          setToken(token);\n\n          // 清空表格\n          form.resetForm();\n\n          status.pushMessage({\n            style: \"dark\",\n            content: \"註冊成功\",\n          });\n\n          status.toggleLoading(false);\n          router.push({ name: \"DynamicWallView\" });\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"註冊失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 取得用戶資料\n    async getProfile() {\n      status.isLoading = true;\n      await apiGetProfile()\n        .then((res) => {\n          this.profile = res.data.data;\n          this.updateProfileData(this.profile);\n\n          status.isLoading = false;\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content:\n              err.response?.data?.message || \"取得個人資料失敗，請重新登入\",\n          });\n          status.isLoading = false;\n\n          // 若驗證個人資料失敗則強制登出\n          clearToken();\n          router.push(\"/signin\");\n        });\n    },\n    // 更新個人資料\n    async updateProfile(data) {\n      status.toggleLoading(true);\n      await apiUpdateProfile(data)\n        .then((res) => {\n          this.profile = res.data.data.user;\n\n          // 更新用戶 data 資料\n          this.updateProfileData(this.profile);\n\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"更新個人資料\",\n            content: \"已成功更新您的個人資料~\",\n          });\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"更新失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 更新密碼\n    async updatePassword(form, data) {\n      status.toggleLoading(true);\n      await apiUpdatePassword(data)\n        .then(() => {\n          // 重置表單\n          form.resetForm();\n\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"更新密碼成功\",\n            content: \"下次登入記得使用新密碼喔~\",\n          });\n\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          status.pushMessage({\n            style: \"danger\",\n            content: err.response?.data?.message || \"更新密碼失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 寄信重設 Email\n    async sendForgetEmail(data) {\n      status.toggleLoading(true);\n      await apiForgetPassword(data)\n        .then(() => {\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"信件已寄出，請收取郵件\",\n            content: \"請至信箱收取重設密碼信，若 1 天內沒收到信再請嘗試一次~\",\n          });\n\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          modal.toggleMsgModal({\n            title: \"驗證信箱失敗\",\n            content:\n              err.response?.data?.message || \"驗證信箱失敗，再請確認信箱\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 重設密碼 - 收取郵件\n    async modifyPassword(token, data) {\n      status.toggleLoading(true);\n      await apiModifyPassword(token, data)\n        .then(() => {\n          // 開啟 msgModal 提示訊息\n          modal.toggleMsgModal({\n            title: \"重設密碼成功\",\n            content: \"請使用新密碼登入喔~\",\n          });\n\n          router.push(\"/signin\");\n          status.toggleLoading(false);\n        })\n        .catch((err) => {\n          modal.toggleMsgModal({\n            title: \"重設密碼失敗\",\n            content: err.response?.data?.message || \"重設密碼失敗\",\n          });\n          status.toggleLoading(false);\n        });\n    },\n    // 更新個人資料頁面 - 個人資料暫存表格\n    updateProfileData(data) {\n      this.tempProfile = {\n        name: data.name,\n        photo: data.photo,\n        gender: data.gender,\n      };\n    },\n    // 取得 personalWall 用戶資料\n    togglePersonalInfo(data) {\n      this.personalInfo = data;\n    },\n  },\n});\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"msgModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"msgModalLabel\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    aria-hidden=\"false\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-body pb-0 text-center\">\n          <slot></slot>\n        </div>\n        <div class=\"modal-footer justify-content-center\">\n          <button\n            type=\"button\"\n            class=\"btn btn-primary py-2 px-8\"\n            data-bs-dismiss=\"modal\"\n          >\n            確定\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"MsgModalComponent\",\n};\n</script>\n","import { render } from \"./MsgModalComponent.vue?vue&type=template&id=ffeb5a5e\"\nimport script from \"./MsgModalComponent.vue?vue&type=script&lang=js\"\nexport * from \"./MsgModalComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\小組\\\\期末小組\\\\node_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <section class=\"d-flex justify-content-center align-items-center vh-100 mx-3\">\r\n    <div class=\"signin\">\r\n      <img src=\"../assets/images/signin.png\" class=\"d-none d-xl-block me-10\" />\r\n      <VForm\r\n        class=\"signinForm\"\r\n        v-slot=\"{ errors, meta }\"\r\n        @submit=\"sendForgetEmail(user)\"\r\n        ref=\"form\"\r\n      >\r\n        <img src=\"../assets/images/MetaWall.png\" class=\"mx-auto\" />\r\n        <h1 class=\"mb-4 text-center h3\">忘記密碼</h1>\r\n        <p class=\"mb-10 text-center fs-4\">請輸入你的電子信箱</p>\r\n        <div class=\"mb-9\">\r\n          <VField\r\n            type=\"email\"\r\n            id=\"email\"\r\n            name=\"電子信箱\"\r\n            placeholder=\"請輸入電子信箱\"\r\n            class=\"form-control\"\r\n            :class=\"{ 'is-invalid': errors['電子信箱'] }\"\r\n            rules=\"email|required\"\r\n            v-model=\"user.email\"\r\n            required\r\n          ></VField>\r\n          <error-message\r\n            name=\"電子信箱\"\r\n            class=\"invalid-feedback text-danger\"\r\n          ></error-message>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"effectBtn btn btn-primary w-100 mb-10\"\r\n          :disabled=\"!meta.valid\"\r\n        >\r\n          送出\r\n        </button>\r\n\r\n        <div class=\"text-end\">\r\n          <router-link to=\"/signin\" class=\"link-primary d-inline-block\">\r\n            返回登入頁\r\n          </router-link>\r\n        </div>\r\n      </VForm>\r\n    </div>\r\n  </section>\r\n\r\n  <MsgModalComponent>\r\n    <template #default>\r\n      <h3 class=\"mb-5\">{{ modal.title }}</h3>\r\n      <p class=\"text-gray-700\">{{ modal.content }}</p>\r\n    </template>\r\n  </MsgModalComponent>\r\n</template>\r\n\r\n<script>\r\nimport MsgModalComponent from \"@/components/MsgModalComponent.vue\";\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport modalStore from \"@/stores/modalStore\";\r\nimport userStore from \"@/stores/userStore\";\r\n\r\nexport default {\r\n  name: \"SignUpView\",\r\n  data() {\r\n    return {\r\n      user: {\r\n        email: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions(userStore, [\"sendForgetEmail\"]),\r\n  },\r\n  computed: {\r\n    ...mapState(modalStore, [\"modal\"]),\r\n  },\r\n  components: {\r\n    MsgModalComponent,\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ForgetView.vue?vue&type=template&id=7c811cdc\"\nimport script from \"./ForgetView.vue?vue&type=script&lang=js\"\nexport * from \"./ForgetView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Node.js 直播班\\\\小組\\\\期末小組\\\\node_final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","modal","modalStore","defineStore","state","profile","name","photo","gender","_id","tempProfile","personalInfo","actions","signIn","form","data","toggleLoading","apiUserSignIn","then","res","token","setToken","resetForm","router","catch","err","pushMessage","style","content","response","message","signUp","apiUserSignUp","async","isLoading","apiGetProfile","this","updateProfileData","clearToken","apiUpdateProfile","user","toggleMsgModal","title","apiUpdatePassword","apiForgetPassword","apiModifyPassword","togglePersonalInfo","class","id","tabindex","_createElementVNode","type","_createElementBlock","_renderSlot","_ctx","_hoisted_5","__exports__","render","src","_imports_0","_imports_1","_hoisted_3","_createVNode","_component_VForm","onSubmit","$data","ref","errors","meta","_hoisted_4","_hoisted_6","_component_VField","placeholder","rules","email","$event","required","_component_error_message","disabled","valid","_hoisted_8","_component_router_link","to","_component_MsgModalComponent","default","_toDisplayString","methods","mapActions","userStore","computed","mapState","components","MsgModalComponent"],"sourceRoot":""}